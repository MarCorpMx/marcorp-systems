<!-- ========================= -->
<!--  SKELETON LOADING -->
<!-- ========================= -->
<div *ngIf="loading" class="space-y-6 animate-pulse">

  <div class="bg-surface p-6 rounded-2xl shadow-soft space-y-4 border-default">
    <div class="h-6 w-1/3 bg-surface-soft rounded"></div>
    <div class="h-10 bg-surface-soft rounded"></div>
    <div class="h-10 bg-surface-soft rounded"></div>
  </div>

  <div class="bg-surface p-6 rounded-2xl shadow-soft space-y-4 border-default">
    <div class="h-6 w-1/4 bg-surface-soft rounded"></div>
    <div class="space-y-3">
      <div class="h-10 bg-surface-soft rounded"
           *ngFor="let i of [1,2,3,4,5]"></div>
    </div>
  </div>

</div>


<!-- ========================= -->
<!--  FORMULARIO -->
<!-- ========================= -->
<form *ngIf="!loading"
      [formGroup]="form"
      (ngSubmit)="save()"
      class="space-y-8">

  <!-- ========================= -->
  <!-- 锔 Configuraci贸n general -->
  <!-- ========================= -->
  <div class="bg-surface p-6 rounded-2xl shadow-soft border-default space-y-6">

    <h2 class="text-lg font-semibold text-primary">
      Configuraci贸n General
    </h2>

    <div class="grid md:grid-cols-2 gap-6">

      <div>
        <label class="block text-sm font-medium text-secondary mb-1">
          Duraci贸n de cita (minutos)
        </label>
        <input type="number"
               formControlName="default_appointment_duration"
               class="w-full input-dark px-3 py-2 rounded-lg" />
      </div>

      <div>
        <label class="block text-sm font-medium text-secondary mb-1">
          Descanso entre citas (minutos)
        </label>
        <input type="number"
               formControlName="break_between_appointments"
               class="w-full input-dark px-3 py-2 rounded-lg" />
      </div>

    </div>

    <div>
      <label class="block text-sm font-medium text-secondary mb-1">
        Reglas internas
      </label>
      <textarea rows="3"
                formControlName="rules"
                class="w-full input-dark px-3 py-2 rounded-lg">
      </textarea>
    </div>

  </div>


  <!-- ========================= -->
  <!--  Horarios -->
  <!-- ========================= -->
  <div class="bg-surface p-6 rounded-2xl shadow-soft border-default">

    <h2 class="text-lg font-semibold text-primary mb-6">
      Horarios de Trabajo
    </h2>

    <div formGroupName="working_hours" class="space-y-4">

      <div *ngFor="let day of daysOfWeek"
           [formGroupName]="day"
           class="grid grid-cols-3 gap-4 items-center">

        <div class="font-medium text-primary">
          {{ day }}
        </div>

        <input type="time"
               formControlName="start"
               class="input-dark rounded-lg px-3 py-2 w-full" />

        <input type="time"
               formControlName="end"
               class="input-dark rounded-lg px-3 py-2 w-full" />
      </div>

    </div>

  </div>


  <!-- ========================= -->
  <!--  D铆as festivos -->
  <!-- ========================= -->
  <div class="bg-surface p-6 rounded-2xl shadow-soft border-default space-y-6">

    <h2 class="text-lg font-semibold text-primary">
      D铆as no laborables
    </h2>

    <div class="space-y-3">
      <div *ngFor="let h of holidays.controls; let i = index"
           class="flex items-center gap-3">

        <input type="date"
               [formControl]="h"
               class="input-dark rounded-lg px-3 py-2" />

        <button type="button"
                (click)="removeHoliday(i)"
                class="text-secondary hover:text-primary transition text-sm">
          Eliminar
        </button>

      </div>
    </div>

    <div class="flex gap-3 items-center">
      <input #newHoliday
             type="date"
             class="input-dark rounded-lg px-3 py-2" />

      <button type="button"
              (click)="addHoliday(newHoliday.value); newHoliday.value=''"
              class="bg-surface-soft hover:bg-[var(--state-hover)] text-primary px-4 py-2 rounded-lg text-sm transition">
        Agregar
      </button>
    </div>

  </div>


  <!-- ========================= -->
  <!--  Bot贸n Guardar -->
  <!-- ========================= -->
  <div class="flex justify-end">
    <button type="submit"
            [disabled]="saving"
            class="btn-primary px-6 py-2 rounded-xl transition disabled:opacity-50 shadow-soft">

      <span *ngIf="!saving">Guardar cambios</span>
      <span *ngIf="saving">Guardando...</span>

    </button>
  </div>

</form>