<section class="organizations-page space-y-6">

  <!-- HEADER -->
  <div class="flex items-center justify-between">
    <div>
      <h2 class="text-xl font-semibold text-[var(--text-primary)]">
        Organizaciones
      </h2>
      <p class="text-sm text-[var(--text-secondary)]">
        Administra los negocios a los que tienes acceso
      </p>
    </div>

    <button
      class="btn-primary"
      (click)="createOrganization()">
      + Nueva organización
    </button>
  </div>

  <!-- ===============================
       SKELETON
  =============================== -->
  @if (loading()) {
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 animate-pulse">
      <div
        *ngFor="let _ of [1,2,3,4]"
        class="bg-[var(--bg-surface)] p-5 rounded-xl border border-[var(--border-soft)] space-y-3">

        <div class="h-4 w-32 bg-[var(--border-soft)] rounded"></div>
        <div class="h-3 w-24 bg-[var(--border-soft)] rounded"></div>
        <div class="h-3 w-full bg-[var(--border-soft)] rounded"></div>
      </div>
    </div>
  }

  <!-- ===============================
       EMPTY
  =============================== -->
  @else if (!hasData()) {
    <div class="bg-[var(--bg-surface)]
                border border-dashed border-[var(--border-soft)]
                rounded-xl p-10 text-center space-y-4">

      <h3 class="text-lg font-semibold">
        No tienes organizaciones
      </h3>

      <p class="text-sm text-[var(--text-secondary)]">
        Crea una organización para comenzar a usar el sistema.
      </p>

      <button class="btn-primary" (click)="createOrganization()">
        Crear organización
      </button>
    </div>
  }

  <!-- ===============================
       LIST
  =============================== -->
  @else {
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      @for (org of organizations(); track org.id) {

        <div class="org-card
                    bg-[var(--bg-surface)]
                    border border-[var(--border-soft)]
                    rounded-xl p-5 space-y-3
                    hover:shadow-soft transition">

          <div class="flex items-start justify-between">
            <div>
              <h3 class="font-semibold text-[var(--text-primary)]">
                {{ org.name }}
              </h3>
              <p class="text-xs text-[var(--text-secondary)]">
                {{ org.role }} · {{ org.members }} miembros
              </p>
            </div>

            @if (org.active) {
              <span class="badge-active">Activa</span>
            }
          </div>

          <div class="flex items-center justify-between pt-2">
            <button
              class="btn-soft"
              [disabled]="org.active"
              (click)="setActive(org)">
              {{ org.active ? 'En uso' : 'Usar organización' }}
            </button>

            <button class="btn-ghost text-sm">
              Ver detalles
            </button>
          </div>

        </div>

      }
    </div>
  }

</section>
