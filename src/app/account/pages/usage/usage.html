<section class="usage-page space-y-6">

  <!-- HEADER -->
  <div>
    <h2 class="text-xl font-semibold">
      Uso y límites
    </h2>
    <p class="text-sm text-[var(--text-secondary)]">
      Revisa el consumo de tu plan actual
    </p>
  </div>

  <!-- ===============================
       SKELETON
  =============================== -->
  @if (loading()) {
    <div class="space-y-4 animate-pulse">
      <div *ngFor="let _ of [1,2,3,4]"
           class="bg-[var(--bg-surface)]
                  border border-[var(--border-soft)]
                  rounded-xl p-5 space-y-3">

        <div class="flex justify-between">
          <div class="h-4 w-32 bg-[var(--border-soft)] rounded"></div>
          <div class="h-4 w-20 bg-[var(--border-soft)] rounded"></div>
        </div>

        <div class="h-2 w-full bg-[var(--border-soft)] rounded"></div>
      </div>
    </div>
  }

  <!-- ===============================
       EMPTY
  =============================== -->
  @else if (!hasData()) {
    <div class="bg-[var(--bg-surface)]
                border border-dashed border-[var(--border-soft)]
                rounded-xl p-10 text-center space-y-4">

      <h3 class="text-lg font-semibold">
        No hay datos de uso
      </h3>

      <p class="text-sm text-[var(--text-secondary)]">
        Aún no se ha registrado consumo en tu cuenta.
      </p>
    </div>
  }

  <!-- ===============================
       USAGE LIST
  =============================== -->
  @else {
    <div class="usage-list">
      @for (item of usage(); track item.id) {

        <div class="usage-card">

          <div class="usage-header">
            <span class="label">{{ item.label }}</span>
            <span class="numbers">
              {{ item.used }} / {{ item.limit }}
            </span>
          </div>

          <div class="progress-bar">
            <div class="progress"
                 [style.width.%]="percentage(item)"
                 [class.warning]="percentage(item) >= 80"
                 [class.danger]="percentage(item) >= 95">
            </div>
          </div>

          <p class="hint">
            {{ percentage(item) }}% utilizado
          </p>

        </div>

      }
    </div>

    <!-- CTA -->
    <div class="upgrade-cta">
      <p>
        ¿Necesitas más capacidad?
      </p>
      <a routerLink="/account/subscriptions"
         class="btn-primary">
        Mejorar plan
      </a>
    </div>
  }

</section>
